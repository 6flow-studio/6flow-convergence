{
  "files": [
    {
      "content": "import { cre, ok, consensusIdenticalAggregation, Runner, type Runtime, type HTTPSendRequester, type CronTrigger } from \"@chainlink/cre-sdk\";\nimport { z } from \"zod\";\n\nconst configSchema = z.object({\n  schedule: z.string().default(\"TZ=UTC 0 */10 * * * *\"),\n});\n\ntype Config = z.infer<typeof configSchema>;\n\nconst fetch_node_1772290494095_1 = (sendRequester: HTTPSendRequester, config: any, apiKey: string) => {\n  const body = {\n    model: \"gpt-5-nano\",\n    messages: [\n      { role: \"system\", content: \"you are helpful\" },\n      { role: \"user\", content: \"hi\" },\n    ],\n  };\n\n  const bodyBytes = new TextEncoder().encode(JSON.stringify(body));\n\n  const req = {\n    url: \"https://api.openai.com/v1/chat/completions\",\n    method: \"POST\" as const,\n    body: Buffer.from(bodyBytes).toString(\"base64\"),\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Authorization\": `Bearer ${apiKey}`,\n    },\n  };\n\n  const resp = sendRequester.sendRequest(req).result();\n\n  if (!ok(resp)) {\n    throw new Error(`AI call failed with status: ${resp.statusCode}`);\n  }\n\n  const parsed = JSON.parse(Buffer.from(resp.body, \"base64\").toString(\"utf-8\"));\n  const text = parsed.choices?.[0]?.message?.content ?? \"\";\n  return { text };\n};\n\nconst onCronTrigger = (runtime: Runtime<Config>, triggerData: CronTrigger): string => {\n  const httpClient = new cre.capabilities.HTTPClient();\n\n  const __stringify = (v: unknown) => JSON.stringify(v, (_, x) => typeof x === \"bigint\" ? x.toString() : x);\n\n  // AI\n  const _aiApiKey_node_1772290494095_1 = runtime.getSecret({ id: \"OPENAI_KEY\" }).result();\n  const step_node_1772290494095_1 = httpClient.sendRequest(runtime, fetch_node_1772290494095_1, consensusIdenticalAggregation())(runtime.config, _aiApiKey_node_1772290494095_1.value).result();\n  runtime.log(`[AI] ${__stringify(step_node_1772290494095_1)}`);\n  return \"Workflow completed\";\n};\n\nconst initWorkflow = (config: Config) => {\n  return [\n    cre.handler(\n      new cre.capabilities.CronCapability().trigger({\n        schedule: config.schedule,\n      }),\n      onCronTrigger,\n    ),\n  ];\n};\n\nexport async function main() {\n  const runner = await Runner.newRunner<Config>({ configSchema });\n  await runner.run(initWorkflow);\n}\n\nmain();\n",
      "path": "main.ts"
    },
    {
      "content": "{\n  \"schedule\": \"TZ=UTC 0 */10 * * * *\"\n}\n",
      "path": "config.staging.json"
    },
    {
      "content": "secretsNames:\n  CLAUDE_KEY:\n    - CLAUDE_API_KEY\n  OPENAI_KEY:\n    - OPENAI_API_KEY\n",
      "path": "secrets.yaml"
    },
    {
      "content": "staging-settings:\n  user-workflow:\n    workflow-name: \"k1757pf7fpab0k6x231nt0sg5n821rrp-staging\"\n  workflow-artifacts:\n    workflow-path: \"./main.ts\"\n    config-path: \"./config.staging.json\"\n    secrets-path: \"../secrets.yaml\"\nproduction-settings:\n  user-workflow:\n    workflow-name: \"k1757pf7fpab0k6x231nt0sg5n821rrp-production\"\n  workflow-artifacts:\n    workflow-path: \"./main.ts\"\n    config-path: \"./config.production.json\"\n    secrets-path: \"../secrets.yaml\"\n",
      "path": "workflow.yaml"
    },
    {
      "content": "staging-settings:\n  rpcs:\n    - chain-name: ethereum-testnet-sepolia\n      url: https://0xrpc.io/sep\n",
      "path": "project.yaml"
    },
    {
      "content": "{\n  \"name\": \"k1757pf7fpab0k6x231nt0sg5n821rrp\",\n  \"version\": \"1.0.0\",\n  \"main\": \"dist/main.js\",\n  \"private\": true,\n  \"scripts\": {\n    \"postinstall\": \"bun x cre-setup\"\n  },\n  \"dependencies\": {\n    \"@chainlink/cre-sdk\": \"^1.0.9\",\n    \"zod\": \"^3.24\"\n  },\n  \"devDependencies\": {\n    \"@types/bun\": \"1.2.21\"\n  }\n}\n",
      "path": "package.json"
    },
    {
      "content": "{\n  \"compilerOptions\": {\n    \"target\": \"ES2022\",\n    \"module\": \"ES2022\",\n    \"moduleResolution\": \"bundler\",\n    \"strict\": true,\n    \"esModuleInterop\": true,\n    \"skipLibCheck\": true,\n    \"forceConsistentCasingInFileNames\": true,\n    \"outDir\": \"./dist\",\n    \"rootDir\": \".\"\n  },\n  \"include\": [\"*.ts\"]\n}\n",
      "path": "tsconfig.json"
    },
    {
      "content": "# Environment variables for CRE simulation\n# Fill in real values before running `cre simulate`\n\nCLAUDE_API_KEY=<CLAUDE_KEY>\nOPENAI_API_KEY=<OPENAI_KEY>\n",
      "path": ".env"
    }
  ],
  "status": "success",
  "warnings": []
}