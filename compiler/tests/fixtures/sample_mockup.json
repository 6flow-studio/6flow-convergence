{
    "id": "mockup-workflow",
    "name": "Cross-Chain KYC Minting",
    "description": "On-chain Transfer event triggers balance check, API validation, and conditional token minting on another chain",
    "version": "1.0.0",
    "globalConfig": {
        "isTestnet": true,
        "defaultChainSelector": "ethereum-testnet-sepolia",
        "secrets": [
            {
                "name": "VALIDATION_API_KEY",
                "envVariable": "VALIDATION_API_KEY_VAR"
            }
        ],
        "rpcs": [
            {
                "chainName": "ethereum-testnet-sepolia",
                "url": "https://0xrpc.io/sep"
            },
            {
                "chainName": "ethereum-testnet-sepolia-base-1",
                "url": "https://base-sepolia.drpc.org"
            }
        ]
    },
    "nodes": [
        {
            "id": "trigger-1",
            "type": "evmLogTrigger",
            "position": {
                "x": 100,
                "y": 300
            },
            "data": {
                "label": "Transfer Event",
                "config": {
                    "chainSelectorName": "ethereum-testnet-sepolia",
                    "contractAddresses": [
                        "0x1234567890abcdef1234567890abcdef12345678"
                    ],
                    "eventSignature": "Transfer(address,address,uint256)",
                    "eventAbi": {
                        "type": "event",
                        "name": "Transfer",
                        "inputs": [
                            {
                                "name": "from",
                                "type": "address",
                                "indexed": true
                            },
                            {
                                "name": "to",
                                "type": "address",
                                "indexed": true
                            },
                            {
                                "name": "value",
                                "type": "uint256",
                                "indexed": false
                            }
                        ]
                    },
                    "blockConfirmation": "finalized"
                }
            }
        },
        {
            "id": "evm-read-1",
            "type": "evmRead",
            "position": {
                "x": 300,
                "y": 300
            },
            "data": {
                "label": "Check Balance",
                "config": {
                    "chainSelectorName": "ethereum-testnet-sepolia",
                    "contractAddress": "0x1234567890abcdef1234567890abcdef12345678",
                    "abi": {
                        "type": "function",
                        "name": "balanceOf",
                        "inputs": [
                            {
                                "name": "account",
                                "type": "address"
                            }
                        ],
                        "outputs": [
                            {
                                "name": "balance",
                                "type": "uint256"
                            }
                        ],
                        "stateMutability": "view"
                    },
                    "functionName": "balanceOf",
                    "args": [
                        {
                            "type": "reference",
                            "value": "{{trigger-1.to}}",
                            "abiType": "address"
                        }
                    ],
                    "blockNumber": "latest"
                }
            }
        },
        {
            "id": "http-1",
            "type": "httpRequest",
            "position": {
                "x": 500,
                "y": 300
            },
            "data": {
                "label": "Validate User",
                "config": {
                    "method": "POST",
                    "url": "https://api.example.com/validate",
                    "authentication": {
                        "type": "bearerToken",
                        "tokenSecret": "VALIDATION_API_KEY"
                    },
                    "headers": {
                        "Content-Type": "application/json"
                    },
                    "body": {
                        "contentType": "json",
                        "data": "{\"address\":\"{{trigger-1.to}}\",\"balance\":\"{{evm-read-1.balance}}\"}"
                    },
                    "responseFormat": "json",
                    "timeout": 10000
                }
            }
        },
        {
            "id": "parse-1",
            "type": "jsonParse",
            "position": {
                "x": 700,
                "y": 300
            },
            "data": {
                "label": "Parse Validation",
                "config": {
                    "strict": true
                }
            }
        },
        {
            "id": "if-1",
            "type": "if",
            "position": {
                "x": 900,
                "y": 300
            },
            "data": {
                "label": "Is Valid?",
                "config": {
                    "conditions": [
                        {
                            "field": "{{parse-1.isValid}}",
                            "operator": "equals",
                            "value": "true"
                        }
                    ],
                    "combineWith": "and"
                }
            }
        },
        {
            "id": "mint-1",
            "type": "mintToken",
            "position": {
                "x": 1100,
                "y": 200
            },
            "data": {
                "label": "Mint Tokens",
                "config": {
                    "chainSelectorName": "ethereum-testnet-sepolia-base-1",
                    "tokenContractAddress": "0xabcdefabcdefabcdefabcdefabcdefabcdefabcd",
                    "tokenAbi": {
                        "type": "function",
                        "name": "mint",
                        "inputs": [
                            {
                                "name": "to",
                                "type": "address"
                            },
                            {
                                "name": "amount",
                                "type": "uint256"
                            }
                        ],
                        "outputs": [],
                        "stateMutability": "nonpayable"
                    },
                    "recipientSource": "{{trigger-1.to}}",
                    "amountSource": "{{evm-read-1.balance}}",
                    "gasLimit": "500000"
                }
            }
        },
        {
            "id": "return-1",
            "type": "return",
            "position": {
                "x": 1300,
                "y": 200
            },
            "data": {
                "label": "Return Success",
                "config": {
                    "returnExpression": "\"Minted successfully\""
                }
            }
        },
        {
            "id": "error-1",
            "type": "error",
            "position": {
                "x": 1100,
                "y": 400
            },
            "data": {
                "label": "Validation Failed",
                "config": {
                    "errorMessage": "User {{trigger-1.to}} failed validation"
                }
            }
        }
    ],
    "edges": [
        {
            "id": "e1",
            "source": "trigger-1",
            "target": "evm-read-1"
        },
        {
            "id": "e2",
            "source": "evm-read-1",
            "target": "http-1"
        },
        {
            "id": "e3",
            "source": "http-1",
            "target": "parse-1"
        },
        {
            "id": "e4",
            "source": "parse-1",
            "target": "if-1"
        },
        {
            "id": "e5",
            "source": "if-1",
            "target": "mint-1",
            "sourceHandle": "true"
        },
        {
            "id": "e6",
            "source": "if-1",
            "target": "error-1",
            "sourceHandle": "false"
        },
        {
            "id": "e7",
            "source": "mint-1",
            "target": "return-1"
        }
    ],
    "createdAt": "2026-02-14T00:00:00Z",
    "updatedAt": "2026-02-14T00:00:00Z"
}
